{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "dashboards_Dashboard_NAP_name": {
            "defaultValue": "Dashboard-NAP-Test",
            "type": "String"
        }
    },
    "variables": {},
    "resources": [
        {
            "type": "Microsoft.Portal/dashboards",
            "apiVersion": "2020-09-01-preview",
            "name": "[parameters('dashboards_Dashboard_NAP_name')]",
            "location": "eastus",
            "tags": {
                "hidden-title": "Dashboard-NAP-Test"
            },
            "properties": {
                "lenses": [
                    {
                        "order": 0,
                        "parts": [
                            {
                                "position": {
                                    "x": 0,
                                    "y": 0,
                                    "rowSpan": 4,
                                    "colSpan": 6
                                },
                                "metadata": {
                                    "inputs": [],
                                    "type": "Extension/HubsExtension/PartType/MarkdownPart",
                                    "settings": {
                                        "content": {
                                            "settings": {
                                                "content": "This dashboard is to test the nginx app protect image with Azure services using ARM templates.\r\n\r\nServices used to create the infra\r\n1. Virtual machines\r\n2. Load balancers\r\n3. monitor/cloudwatch\r\n4. autoscale\r\n5. telemetry",
                                                "title": "[parameters('dashboards_Dashboard_NAP_name')]",
                                                "subtitle": "Test SubTitle",
                                                "markdownSource": 1
                                            }
                                        }
                                    }
                                }
                            },
                            {
                                "position": {
                                    "x": 6,
                                    "y": 0,
                                    "rowSpan": 4,
                                    "colSpan": 8
                                },
                                "metadata": {
                                    "inputs": [
									    {
										"name": "queryParams",
										"value": {
											"chartPartQueryParamsType": 1,
											"metricQueryId": "memory",
											"computerName": "demoVM1",
											"workspaceId": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourcegroups/user-shshaik/providers/microsoft.operationalinsights/workspaces/sshaik-lws",
											"timeRange": {
											"options": {},
											"relative": {
												"duration": 3600000
											}
											},
											"resourceId": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourcegroups/user-shshaik/providers/microsoft.compute/virtualmachines/demovm1"
										}
									    },
										{
										"name": "bladeName",
										"value": "VmResourcePerfFrameBladeViewModel"
										},
										{
										"name": "bladeParams",
										"value": {
											"displayName": "demoVM1",
											"computerName": "demoVM1",
											"workspaceId": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourcegroups/user-shshaik/providers/microsoft.operationalinsights/workspaces/sshaik-lws",
											"computerId": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourcegroups/user-shshaik/providers/microsoft.operationalinsights/workspaces/sshaik-lws/features/servicemap/machines/m-5b750f0a-b5a7-4fe7-b59c-f10328710a1b",
											"dateTime": {
											"options": {},
											"relative": {
												"duration": 3600000
											}
											}
										}
										},
										{
										"name": "defaultOptionPicks",
										"value": [
											{
											"id": "Avg",
											"displayName": "Avg",
											"isSelected": true
											},
											{
											"id": "Max",
											"displayName": "Max",
											"isSelected": false
											},
											{
											"id": "P50",
											"displayName": "50th",
											"isSelected": false
											},
											{
											"id": "P10",
											"displayName": "10th",
											"isSelected": true
											},
											{
											"id": "P05",
											"displayName": "5th",
											"isSelected": true
											},
											{
											"id": "Min",
											"displayName": "Min",
											"isSelected": false
											}
										]
										},
										{
										"name": "showOptionPicker",
										"value": false
										}
									],
                                    "type": "Extension/Microsoft_Azure_WorkloadInsights/PartType/ChartPart"
                                }
                            },
                            {
                                "position": {
                                    "x": 14,
                                    "y": 0,
                                    "rowSpan": 4,
                                    "colSpan": 8
                                },
                                "metadata": {
                                    "inputs": [
										{
										"name": "queryParams",
										"value": {
											"chartPartQueryParamsType": 1,
											"metricQueryId": "cpu",
											"computerName": "demoVM1",
											"workspaceId": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourcegroups/user-shshaik/providers/microsoft.operationalinsights/workspaces/sshaik-lws",
											"timeRange": {
											"options": {},
											"relative": {
												"duration": 3600000
											}
											},
											"resourceId": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourcegroups/user-shshaik/providers/microsoft.compute/virtualmachines/demovm1"
										}
										},
										{
										"name": "bladeName",
										"value": "VmResourcePerfFrameBladeViewModel"
										},
										{
										"name": "bladeParams",
										"value": {
											"displayName": "demoVM1",
											"computerName": "demoVM1",
											"workspaceId": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourcegroups/user-shshaik/providers/microsoft.operationalinsights/workspaces/sshaik-lws",
											"computerId": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourcegroups/user-shshaik/providers/microsoft.operationalinsights/workspaces/sshaik-lws/features/servicemap/machines/m-5b750f0a-b5a7-4fe7-b59c-f10328710a1b",
											"dateTime": {
											"options": {},
											"relative": {
												"duration": 3600000
											}
											}
										}
										},
										{
										"name": "defaultOptionPicks",
										"value": [
											{
											"id": "Avg",
											"displayName": "Avg",
											"isSelected": true
											},
											{
											"id": "Min",
											"displayName": "Min",
											"isSelected": false
											},
											{
											"id": "P50",
											"displayName": "50th",
											"isSelected": false
											},
											{
											"id": "P90",
											"displayName": "90th",
											"isSelected": false
											},
											{
											"id": "P95",
											"displayName": "95th",
											"isSelected": true
											},
											{
											"id": "Max",
											"displayName": "Max",
											"isSelected": false
											}
										]
										},
										{
										"name": "showOptionPicker",
										"value": false
										}
									],
                                    "type": "Extension/Microsoft_Azure_WorkloadInsights/PartType/ChartPart"
                                }
                            },
                            {
                                "position": {
                                    "x": 0,
                                    "y": 4,
                                    "rowSpan": 4,
                                    "colSpan": 6
                                },
                                "metadata": {
                                    "inputs": [
										{
										"name": "options",
										"value": {
											"chart": {
											"metrics": [
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
												},
												"name": "Network In Total",
												"aggregationType": 1,
												"metricVisualization": {
													"displayName": "Network In Total",
													"resourceDisplayName": "demovm2"
												}
												},
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
												},
												"name": "Network Out Total",
												"aggregationType": 1,
												"metricVisualization": {
													"displayName": "Network Out Total",
													"resourceDisplayName": "demovm2"
												}
												}
											],
											"title": "Network (total)",
											"titleKind": 2,
											"visualization": {
												"chartType": 2
											},
											"openBladeOnClick": {
												"openBlade": true
											}
											}
										},
										"isOptional": true
										},
										{
										"name": "sharedTimeRange",
										"isOptional": true
										}
									],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
											"options": {
												"chart": {
												"metrics": [
													{
													"resourceMetadata": {
														"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
													},
													"name": "Network In Total",
													"aggregationType": 1,
													"metricVisualization": {
														"displayName": "Network In Total",
														"resourceDisplayName": "demovm2"
													}
													},
													{
													"resourceMetadata": {
														"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
													},
													"name": "Network Out Total",
													"aggregationType": 1,
													"metricVisualization": {
														"displayName": "Network Out Total",
														"resourceDisplayName": "demovm2"
													}
													}
												],
												"title": "Network (total)",
												"titleKind": 2,
												"visualization": {
													"chartType": 2,
													"disablePinning": true
												},
												"openBladeOnClick": {
													"openBlade": true
												}
												}
											}
											}
										},
										"filters": {
											"MsPortalFx_TimeRange": {
											"model": {
												"format": "local",
												"granularity": "auto",
												"relative": "60m"
											}
											}
                                    }
                                }
                            },
                            {
                                "position": {
                                    "x": 6,
                                    "y": 4,
                                    "rowSpan": 4,
                                    "colSpan": 7
                                },
                                "metadata": {
                                    "inputs": [
										{
										"name": "options",
										"value": {
											"chart": {
											"metrics": [
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/user-shshaik/providers/Microsoft.Compute/virtualMachineScaleSets/autoscale-Demo"
												},
												"name": "Disk Read Bytes",
												"aggregationType": 1,
												"metricVisualization": {
													"resourceDisplayName": "autoscale-demo"
												}
												},
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/user-shshaik/providers/Microsoft.Compute/virtualMachineScaleSets/autoscale-Demo"
												},
												"name": "Disk Write Bytes",
												"aggregationType": 1,
												"metricVisualization": {
													"resourceDisplayName": "autoscale-demo"
												}
												}
											],
											"title": "Disk bytes (total)",
											"titleKind": 2,
											"visualization": {
												"chartType": 2
											},
											"openBladeOnClick": {
												"openBlade": true
											}
											}
										},
										"isOptional": true
										},
										{
										"name": "sharedTimeRange",
										"isOptional": true
										}
									],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
											"options": {
												"chart": {
												"metrics": [
													{
													"resourceMetadata": {
														"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/user-shshaik/providers/Microsoft.Compute/virtualMachineScaleSets/autoscale-Demo"
													},
													"name": "Disk Read Bytes",
													"aggregationType": 1,
													"metricVisualization": {
														"resourceDisplayName": "autoscale-demo"
													}
													},
													{
													"resourceMetadata": {
														"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/user-shshaik/providers/Microsoft.Compute/virtualMachineScaleSets/autoscale-Demo"
													},
													"name": "Disk Write Bytes",
													"aggregationType": 1,
													"metricVisualization": {
														"resourceDisplayName": "autoscale-demo"
													}
													}
												],
												"title": "Disk bytes (total)",
												"titleKind": 2,
												"visualization": {
													"chartType": 2,
													"disablePinning": true
												},
												"openBladeOnClick": {
													"openBlade": true
												}
												}
											}
										}
                                    },
									"filters": {
										"MsPortalFx_TimeRange": {
											"model": {
												"format": "local",
												"granularity": "auto",
												"relative": "60m"
											}
										}
									}
                                }
                            },
                            {
                                "position": {
                                    "x": 13,
                                    "y": 4,
                                    "rowSpan": 4,
                                    "colSpan": 8
                                },
                                "metadata": {
                                    "inputs": [
										{
										"name": "options",
										"value": {
											"chart": {
											"metrics": [
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
												},
												"name": "Percentage CPU",
												"aggregationType": 4,
												"metricVisualization": {
													"displayName": "Percentage CPU",
													"resourceDisplayName": "demovm2"
												}
												}
											],
											"title": "CPU (average)",
											"titleKind": 2,
											"visualization": {
												"chartType": 2
											},
											"openBladeOnClick": {
												"openBlade": true
											}
											}
										},
										"isOptional": true
										},
										{
										"name": "sharedTimeRange",
										"isOptional": true
										}
									],
                                    "type": "Extension/HubsExtension/PartType/MonitorChartPart",
                                    "settings": {
                                        "content": {
											"options": {
												"chart": {
													"metrics": [
														{
														"resourceMetadata": {
															"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
														},
														"name": "Percentage CPU",
														"aggregationType": 4,
														"metricVisualization": {
															"displayName": "Percentage CPU",
															"resourceDisplayName": "demovm2"
														}
														}
													],
													"title": "CPU (average)",
													"titleKind": 2,
													"visualization": {
														"chartType": 2,
														"disablePinning": true
													},
													"openBladeOnClick": {
														"openBlade": true
													}
												}
											}
										},
										"filters": {
										  "MsPortalFx_TimeRange": {
											"model": {
												"format": "local",
												"granularity": "auto",
												"relative": "60m"
											}	
										  }
                                        }
                                    }
								}
                            },
                            {
                                "position": {
                                    "x": 0,
                                    "y": 8,
                                    "rowSpan": 4,
                                    "colSpan": 6
                                },
                                "metadata": {
									"inputs": [
										{
										"name": "options",
										"value": {
											"chart": {
											"metrics": [
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
												},
												"name": "Disk Read Bytes",
												"aggregationType": 1,
												"metricVisualization": {
													"displayName": "Disk Read Bytes",
													"resourceDisplayName": "demovm2"
												}
												},
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
												},
												"name": "Disk Write Bytes",
												"aggregationType": 1,
												"metricVisualization": {
													"displayName": "Disk Write Bytes",
													"resourceDisplayName": "demovm2"
												}
												}
											],
											"title": "Disk bytes (total)",
											"titleKind": 2,
											"visualization": {
												"chartType": 2
											},
											"openBladeOnClick": {
												"openBlade": true
											}
											}
										},
										"isOptional": true
										},
										{
										"name": "sharedTimeRange",
										"isOptional": true
										}
									],
									"type": "Extension/HubsExtension/PartType/MonitorChartPart",
									"settings": {
										"content": {
										"options": {
											"chart": {
											"metrics": [
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
												},
												"name": "Disk Read Bytes",
												"aggregationType": 1,
												"metricVisualization": {
													"displayName": "Disk Read Bytes",
													"resourceDisplayName": "demovm2"
												}
												},
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/USER-SHSHAIK/providers/Microsoft.Compute/virtualMachines/demoVM2"
												},
												"name": "Disk Write Bytes",
												"aggregationType": 1,
												"metricVisualization": {
													"displayName": "Disk Write Bytes",
													"resourceDisplayName": "demovm2"
												}
												}
											],
											"title": "Disk bytes (total)",
											"titleKind": 2,
											"visualization": {
												"chartType": 2,
												"disablePinning": true
											},
											"openBladeOnClick": {
												"openBlade": true
											}
											}
										}
										}
									},
									"filters": {
										"MsPortalFx_TimeRange": {
										"model": {
											"format": "local",
											"granularity": "auto",
											"relative": "60m"
										}
										}
									}
								}
                            },
                            {
                                "position": {
                                    "x": 6,
                                    "y": 8,
                                    "rowSpan": 4,
                                    "colSpan": 6
                                },
                                "metadata": {
									"inputs": [
										{
										"name": "options",
										"value": {
											"chart": {
											"metrics": [
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/user-shshaik/providers/Microsoft.Compute/virtualMachineScaleSets/autoscale-Demo"
												},
												"name": "Network In",
												"aggregationType": 1,
												"metricVisualization": {
													"resourceDisplayName": "autoscale-demo"
												}
												},
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/user-shshaik/providers/Microsoft.Compute/virtualMachineScaleSets/autoscale-Demo"
												},
												"name": "Network Out",
												"aggregationType": 1,
												"metricVisualization": {
													"resourceDisplayName": "autoscale-demo"
												}
												}
											],
											"title": "Network (total)",
											"titleKind": 2,
											"visualization": {
												"chartType": 2
											},
											"openBladeOnClick": {
												"openBlade": true
											}
											}
										},
										"isOptional": true
										},
										{
										"name": "sharedTimeRange",
										"isOptional": true
										}
									],
									"type": "Extension/HubsExtension/PartType/MonitorChartPart",
									"settings": {
										"content": {
										"options": {
											"chart": {
											"metrics": [
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/user-shshaik/providers/Microsoft.Compute/virtualMachineScaleSets/autoscale-Demo"
												},
												"name": "Network In",
												"aggregationType": 1,
												"metricVisualization": {
													"resourceDisplayName": "autoscale-demo"
												}
												},
												{
												"resourceMetadata": {
													"id": "/subscriptions/e1e590f6-555e-4dc0-8472-be7fab700b51/resourceGroups/user-shshaik/providers/Microsoft.Compute/virtualMachineScaleSets/autoscale-Demo"
												},
												"name": "Network Out",
												"aggregationType": 1,
												"metricVisualization": {
													"resourceDisplayName": "autoscale-demo"
												}
												}
											],
											"title": "Network (total)",
											"titleKind": 2,
											"visualization": {
												"chartType": 2,
												"disablePinning": true
											},
											"openBladeOnClick": {
												"openBlade": true
											}
											}
										}
										}
									},
									"filters": {
										"MsPortalFx_TimeRange": {
										"model": {
											"format": "local",
											"granularity": "auto",
											"relative": "60m"
										}
										}
									}
								}
                            }
                        ]
                    }
                ],
                "metadata": {
                    "model": {
						"timeRange": {
						"value": {
							"relative": {
							"duration": 24,
							"timeUnit": 1
							}
						},
						"type": "MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"
						},
						"filterLocale": {
						"value": "en-us"
						},
						"filters": {
							"value": {
								"MsPortalFx_TimeRange": {
								"model": {
									"format": "utc",
									"granularity": "auto",
									"relative": "4h"
								},
								"displayCache": {
									"name": "UTC Time",
									"value": "Past 4 hours"
								},
								"filteredPartIds": [
									"StartboardPart-MonitorChartPart-22084527-de00-4803-93d3-27604bf83461",
									"StartboardPart-MonitorChartPart-22084527-de00-4803-93d3-27604bf83463",
									"StartboardPart-MonitorChartPart-22084527-de00-4803-93d3-27604bf83465",
									"StartboardPart-MonitorChartPart-22084527-de00-4803-93d3-27604bf83467",
									"StartboardPart-MonitorChartPart-22084527-de00-4803-93d3-27604bf83469"
								]
								}
							}
						}
					}
                }
            }
        }
    ]
}
